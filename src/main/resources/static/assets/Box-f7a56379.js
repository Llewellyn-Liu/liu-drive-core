import{_ as j,u as L,a as J,r as n,o as u,c as r,b as e,w as t,F as v,d as i,e as h,f as c,g as K,t as _,h as M,p as q,i as z}from"./index-55502ee4.js";const A={setup(){const a=L(),o=J();return{fileListStore:a,userStore:o}},data(){return{sc_memoDialog:!1,sc_tempTag:"",sc_tempMemo:{title:"",content:"",tag:[]},sc_uploadDialog:!1,sc_tempFileData:"",sc_filter:[],test_user:{id:"",description:""},test_fileData:""}},methods:{async testFastUpload(){await fetch("/service/object/"+this.user.token,{method:"POST",body:JSON.stringify({filename:"testFile",data:"This is a demo memo."}),headers:new Headers({"Content-Type":"application/json"})}).then(a=>a.json()).then(a=>console.log("testFastupload",a))},sc_addTag(){this.sc_tempMemo.tag.push(this.sc_tempTag),console.log(JSON.stringify(this.sc_tempMemo))},sc_removeTag(a){this.sc_tempMemo.tag.splice(a)},async dr_submitMemo(){await this.dr_sendSubmitMemoRequest()},async dr_sendSubmitMemoRequest(){return console.log(JSON.stringify(this.sc_tempMemo)),console.log("Upload memo: userStore: ",this.userStore.id,this.userStore.token),await fetch("/drive/memo",{method:"POST",body:JSON.stringify({title:this.sc_tempMemo.title,content:this.sc_tempMemo.content,tag:this.sc_tempMemo.tag,accessibility:0,userId:this.userStore.id}),headers:new Headers({"Content-Type":"application/json"})})},sc_clearMemo(){this.sc_tempMemo.title="",this.sc_tempMemo.content="",this.sc_tempMemo.tag=[]},async sc_loadInputData(a){const o=a.target.files[0],g=Math.floor(o.size/1048576);console.log("Select data: pieces:",g);for(let d=0;d<g;d++)await fetch("/test/large/"+d,{method:"POST",body:o.slice(d*1048576,(d+1)*1048576,"application/octet-stream")});await fetch("/test/large/"+g,{method:"POST",body:o.slice(g*1048576,o.size,"application/octet-stream")})},async dr_downloadFile(a){window.open("/drive/object/"+this.userStore.id+"/"+a)}}},H=a=>(q("data-v-a60ea067"),a=a(),z(),a),R=H(()=>i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Name "),i("th",{class:"text-left"}," Type "),i("th",{class:"text-left"}," Accessibility "),i("th",{class:"text-left"}," Tag "),i("th",{class:"text-left"}," Action ")])],-1));function W(a,o,g,d,s,p){const T=n("v-checkbox"),m=n("v-col"),b=n("v-row"),y=n("v-chip"),I=n("v-table"),x=n("v-container"),N=n("v-tooltip"),S=n("v-btn"),w=n("v-card-title"),O=n("v-card-subtitle"),V=n("v-card-text"),k=n("v-card"),P=n("v-file-input"),C=n("v-card-actions"),D=n("v-dialog"),U=n("v-text-field"),B=n("v-textarea");return u(),r(v,null,[e(x,{fluid:""},{default:t(()=>[e(b,{dense:""},{default:t(()=>[e(m,{cols:"1"},{default:t(()=>[e(T,{modelValue:s.sc_filter,"onUpdate:modelValue":o[0]||(o[0]=l=>s.sc_filter=l),label:"Public",value:"0"},null,8,["modelValue"])]),_:1}),e(m,{cols:"1"},{default:t(()=>[e(T,{modelValue:s.sc_filter,"onUpdate:modelValue":o[1]||(o[1]=l=>s.sc_filter=l),label:"Private",value:"1"},null,8,["modelValue"])]),_:1}),e(m,{cols:"1"},{default:t(()=>[e(T,{modelValue:s.sc_filter,"onUpdate:modelValue":o[2]||(o[2]=l=>s.sc_filter=l),label:"Temp",value:"2"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(m,{cols:"9"},{default:t(()=>[e(x,{class:"fileWall"},{default:t(()=>[e(b,null,{default:t(()=>[e(m,null,{default:t(()=>[e(I,{density:"compact"},{default:t(()=>[R,i("tbody",null,[(u(!0),r(v,null,h(d.fileListStore.getFilter(s.sc_filter),l=>(u(),r("tr",{key:l.filename},[i("td",null,_(l.filename),1),i("td",null,_(l.type),1),i("td",null,_(l.accessibility),1),i("td",null,[(u(!0),r(v,null,h(l.tag,f=>(u(),M(y,null,{default:t(()=>[c(_(f),1)]),_:2},1024))),256))]),i("td",null,[e(y,{onClick:f=>p.dr_downloadFile(l.filename),icon:"mdi-download"},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"3"},{default:t(()=>[e(x,{class:"memoWall"},{default:t(()=>[e(S,{onClick:o[3]||(o[3]=l=>{s.sc_memoDialog=!s.sc_memoDialog,console.log(s.sc_memoDialog)})},{default:t(()=>[c("Memos "),e(N,{activator:"parent",location:"end"},{default:t(()=>[c("Press to create memos")]),_:1})]),_:1}),e(b,null,{default:t(()=>[(u(!0),r(v,null,h(d.fileListStore.memo,(l,f)=>(u(),M(m,{cols:"6"},{default:t(()=>[e(k,null,{default:t(()=>[e(w,null,{default:t(()=>[c(_(l.title)+" - "+_(f),1)]),_:2},1024),e(O,null,{default:t(()=>[(u(!0),r(v,null,h(l.tag,F=>(u(),M(y,null,{default:t(()=>[c(_(F),1)]),_:2},1024))),256))]),_:2},1024),e(V,null,{default:t(()=>[c(_(l.content),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{modelValue:s.sc_uploadDialog,"onUpdate:modelValue":o[5]||(o[5]=l=>s.sc_uploadDialog=l),width:"25vw"},{default:t(()=>[e(k,null,{default:t(()=>[e(w,null,{default:t(()=>[c("File Uploader")]),_:1}),e(V,null,{default:t(()=>[e(P,{chips:"",onInput:o[4]||(o[4]=l=>p.sc_loadInputData(l))})]),_:1}),e(C,null,{default:t(()=>[e(S,null,{default:t(()=>[c("Upload")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(D,{class:"memoDialog",modelValue:s.sc_memoDialog,"onUpdate:modelValue":o[9]||(o[9]=l=>s.sc_memoDialog=l)},{default:t(()=>[e(k,null,{default:t(()=>[c(" Create Memo "),e(w,null,{default:t(()=>[c(" Title "),e(U,{hint:"Title",modelValue:s.sc_tempMemo.title,"onUpdate:modelValue":o[6]||(o[6]=l=>s.sc_tempMemo.title=l)},null,8,["modelValue"])]),_:1}),e(V,null,{default:t(()=>[c("Content "),e(B,{modelValue:s.sc_tempMemo.content,"onUpdate:modelValue":o[7]||(o[7]=l=>s.sc_tempMemo.content=l)},null,8,["modelValue"])]),_:1}),e(V,null,{default:t(()=>[c("Tags "),e(U,{modelValue:s.sc_tempTag,"onUpdate:modelValue":o[8]||(o[8]=l=>s.sc_tempTag=l),onKeyup:K(p.sc_addTag,["enter"])},null,8,["modelValue","onKeyup"]),(u(!0),r(v,null,h(s.sc_tempMemo.tag,(l,f)=>(u(),M(y,{closable:"",class:"ma-2","onClick:close":F=>p.sc_removeTag(f)},{default:t(()=>[c(_(l),1)]),_:2},1032,["onClick:close"]))),256))]),_:1}),e(C,null,{default:t(()=>[e(S,{onClick:p.dr_submitMemo},{default:t(()=>[c("Submit")]),_:1},8,["onClick"]),e(S,{onClick:p.sc_clearMemo},{default:t(()=>[c("Clear")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const G=j(A,[["render",W],["__scopeId","data-v-a60ea067"]]);export{G as default};
